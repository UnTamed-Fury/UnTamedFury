[build]
  command = "npm run build"
  publish = "public"
  functions = "functions"

[dev]
  command = "npm run dev"
  port = 8888

# Redirect main routes to HTML files
[[redirects]]
  from = "/about"
  to = "/about.html"
  status = 200

[[redirects]]
  from = "/contacts"
  to = "/contacts.html"
  status = 200

# Prevent direct access to HTML files by redirecting back to the clean URLs
[[redirects]]
  from = "/index.html"
  to = "/"
  status = 301

[[redirects]]
  from = "/about.html"
  to = "/about"
  status = 301

[[redirects]]
  from = "/contacts.html"
  to = "/contacts"
  status = 301

# Handle API routes if needed
[[redirects]]
  from = "/api/*"
  to = "/api/:splat"
  status = 200

# Fallback for any other routes
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

[template.environment]
  NODE_VERSION = "20"

[build.environment]
  NODE_VERSION = "20"